{"version":3,"file":"androidAssemble.js","names":["androidAssemble","root","androidPath","report","cwd","path","relative","info","kleur","blue","gradleWrapper","platform","fs","pathExists","join","execFileSync","Error"],"sources":["../../src/utils/androidAssemble.ts"],"sourcesContent":["import path from 'path';\nimport kleur from 'kleur';\nimport fs from 'fs-extra';\nimport { execFileSync } from 'child_process';\nimport { platform } from 'os';\nimport type { Report } from '../types';\n\ntype Options = {\n  root: string;\n  androidPath: string;\n  report: Report;\n};\n\nexport default async function androidAssemble({\n  root,\n  androidPath,\n  report,\n}: Options) {\n  const cwd = path.relative(root, androidPath);\n\n  report.info(\n    `Assembling Android project in ${kleur.blue(cwd)} with ${kleur.blue(\n      'gradle'\n    )}`\n  );\n\n  const gradleWrapper = platform() === 'win32' ? 'gradlew.bat' : './gradlew';\n  if (await fs.pathExists(path.join(androidPath, gradleWrapper))) {\n    execFileSync(gradleWrapper, ['assemble'], { cwd: androidPath });\n  } else {\n    throw new Error(\n      `The ${kleur.blue(\n        'gradlew'\n      )} script doesn't seem to present in ${kleur.blue(\n        androidPath\n      )}. Make sure you have added it by running ${kleur.blue(\n        'gradle wrapper'\n      )} in that directory.`\n    );\n  }\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;AASe,eAAeA,eAAf,CAA+B;EAC5CC,IAD4C;EAE5CC,WAF4C;EAG5CC;AAH4C,CAA/B,EAIH;EACV,MAAMC,GAAG,GAAGC,aAAA,CAAKC,QAAL,CAAcL,IAAd,EAAoBC,WAApB,CAAZ;;EAEAC,MAAM,CAACI,IAAP,CACG,iCAAgCC,cAAA,CAAMC,IAAN,CAAWL,GAAX,CAAgB,SAAQI,cAAA,CAAMC,IAAN,CACvD,QADuD,CAEvD,EAHJ;EAMA,MAAMC,aAAa,GAAG,IAAAC,YAAA,QAAe,OAAf,GAAyB,aAAzB,GAAyC,WAA/D;;EACA,IAAI,MAAMC,gBAAA,CAAGC,UAAH,CAAcR,aAAA,CAAKS,IAAL,CAAUZ,WAAV,EAAuBQ,aAAvB,CAAd,CAAV,EAAgE;IAC9D,IAAAK,2BAAA,EAAaL,aAAb,EAA4B,CAAC,UAAD,CAA5B,EAA0C;MAAEN,GAAG,EAAEF;IAAP,CAA1C;EACD,CAFD,MAEO;IACL,MAAM,IAAIc,KAAJ,CACH,OAAMR,cAAA,CAAMC,IAAN,CACL,SADK,CAEL,sCAAqCD,cAAA,CAAMC,IAAN,CACrCP,WADqC,CAErC,4CAA2CM,cAAA,CAAMC,IAAN,CAC3C,gBAD2C,CAE3C,qBAPE,CAAN;EASD;AACF"}