{"version":3,"file":"jetifier.js","names":["jetifier","root","input","output","reverse","jetifierStandalone","path","join","fs","pathExists","args","push","execFileSync","Error","kleur","blue"],"sources":["../../src/utils/jetifier.ts"],"sourcesContent":["import path from 'path';\nimport kleur from 'kleur';\nimport { execFileSync } from 'child_process';\nimport fs from 'fs-extra';\nimport type { Report } from '../types';\n\ntype Options = {\n  root: string;\n  input: string;\n  output: string;\n  reverse: boolean;\n  report: Report;\n};\n\nexport default async function jetifier({\n  root,\n  input,\n  output,\n  reverse,\n}: Options) {\n  const jetifierStandalone = path.join(\n    root,\n    'node_modules',\n    '.bin',\n    'jetifier-standalone'\n  );\n\n  if (await fs.pathExists(jetifierStandalone)) {\n    const args = ['-i', input, '-o', output];\n    if (reverse) {\n      args.push('-r');\n    }\n\n    execFileSync(jetifierStandalone, args);\n  } else {\n    throw new Error(\n      `The ${kleur.blue(\n        'jetifier'\n      )} binary doesn't seem to be installed under ${kleur.blue(\n        'node_modules'\n      )}. Make sure you have added ${kleur.blue(\n        'jetifier'\n      )} to your ${kleur.blue('devDependencies')}.`\n    );\n  }\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAWe,eAAeA,QAAf,CAAwB;EACrCC,IADqC;EAErCC,KAFqC;EAGrCC,MAHqC;EAIrCC;AAJqC,CAAxB,EAKH;EACV,MAAMC,kBAAkB,GAAGC,aAAA,CAAKC,IAAL,CACzBN,IADyB,EAEzB,cAFyB,EAGzB,MAHyB,EAIzB,qBAJyB,CAA3B;;EAOA,IAAI,MAAMO,gBAAA,CAAGC,UAAH,CAAcJ,kBAAd,CAAV,EAA6C;IAC3C,MAAMK,IAAI,GAAG,CAAC,IAAD,EAAOR,KAAP,EAAc,IAAd,EAAoBC,MAApB,CAAb;;IACA,IAAIC,OAAJ,EAAa;MACXM,IAAI,CAACC,IAAL,CAAU,IAAV;IACD;;IAED,IAAAC,2BAAA,EAAaP,kBAAb,EAAiCK,IAAjC;EACD,CAPD,MAOO;IACL,MAAM,IAAIG,KAAJ,CACH,OAAMC,cAAA,CAAMC,IAAN,CACL,UADK,CAEL,8CAA6CD,cAAA,CAAMC,IAAN,CAC7C,cAD6C,CAE7C,8BAA6BD,cAAA,CAAMC,IAAN,CAC7B,UAD6B,CAE7B,YAAWD,cAAA,CAAMC,IAAN,CAAW,iBAAX,CAA8B,GAPvC,CAAN;EASD;AACF"}